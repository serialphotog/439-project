!function r(o,c,a){function u(t,e){if(!c[t]){if(!o[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(p)return p(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var n=c[t]={exports:{}};o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,c,a)}return c[t].exports}for(var p="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,s){"use strict";var i=e("./lib/ui.js");window.addEventListener("load",function e(t){window.removeEventListener(t.type,e,!1);var s=new i.UI;s.initListeners(),document.addEventListener("keyup",function(e){s.handleKeyPress(e)})},!1)},{"./lib/ui.js":4}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Calculator=function(){function a(e){return e<0?-1:0==e?1:e*a(e-1)}this.toPostfix=function(e){var t="",s=[],i={"^":{precedence:4,associativity:"right"},"!":{precedence:4,associativity:"right"},"/":{precedence:3,associativity:"left"},"*":{precedence:3,associativity:"left"},"+":{precedence:2,associativity:"left"},"-":{precedence:2,associativity:"left"}};e=(e=(e=e.replace(/&pi;/,Math.PI)).replace(/\s+/g,"")).split(/([\+\-\*\/\^\(\)\!])/).clean();for(var n=0;n<e.length;n++){var r=e[n];if("sqrt"==r?s.push("sqrt("):"sin"==r?s.push("sin("):"cos"==r?s.push("cos("):"tan"==r?s.push("tan("):"log"==r&&s.push("log("),r.isNumeric())t+=r+" ";else if(-1!=="^*/+-!".indexOf(r)){for(var o=r,c=s[s.length-1];-1!=="^*/+-!".indexOf(c)&&("left"==i[o].associativity&&i[o].precedence<=i[c].precedence||"right"==i[o].associativity&&i[c].precedence<i[c].precedence);)t+=s.pop()+" ",c=s[s.length-1];s.push(o)}else if("("==r)s.push(r);else if(")"==r){for(;"("!==s[s.length-1];)t+=s.pop()+" ";s.pop()}}for(;0<s.length;)t+=s.pop()+" ";return t},this.calc=function(e){var t,s,i=[];e=e.split(" ").clean();for(var n=0;n<e.length;n++)if(e[n].isNumeric())i.push(e[n]);else{var r=i.pop(),o=i.pop();"+"===e[n]?i.push(parseFloat(r)+parseFloat(o)):"-"===e[n]?i.push(parseFloat(o)-parseFloat(r)):"*"===e[n]?i.push(parseFloat(r)*parseFloat(o)):"/"===e[n]?i.push(parseFloat(o)/parseFloat(r)):"^"===e[n]?i.push(Math.pow(parseFloat(o),parseFloat(r))):"!"==e[n]?i.push(a(r)):"sqrt("==e[n]?i.push(Math.sqrt(r)):"sin("==e[n]?i.push(Math.sin(r*Math.PI/180)):"cos("==e[n]?90==r?i.push(1):i.push(Math.cos(r*Math.PI/180)):"tan("==e[n]?90==r?i.push(1/0):i.push(Math.tan(r*Math.PI/180)):"log("==e[n]&&i.push((t=r,s=10,Math.log(t)/Math.log(s)))}if(1<i.length)return"Syntax Error";var c=i.pop();return"NaN"==c||isNaN(c)?c="Syntax Error!":"Infinity"==c&&(c="&#8734;"),c.toString()}},String.prototype.isNumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},Array.prototype.clean=function(){for(var e=0;e<this.length;e++)""===this[e]&&this.splice(e,1);return this}},{}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.History=function(){this.maxItems=10,this.currentIdx=-1,this.store=[],this.insert=function(e){var t=e,s=this.currentIdx+1;if(s>this.maxItems-1?(s=this.maxItems,this.currentIdx=this.maxItems):this.currentIdx++,0==s)this.store[0]=e;else{s+1<this.maxItems-1&&(s+=1);for(var i=0;i<s;i++){var n=this.store[i];this.store[i]=t,t=n}}},this.getHistory=function(){return this.store},this.setMaxItems=function(e){this.maxItems=e}}},{}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.UI=function(){this.expressionStr="",this.history=new n.History,this.historyIndex=-1,this.displayingResult=!1,this.initListeners=function(){var e=this,t=document.querySelector("#btn_ac"),s=document.querySelector("#btn_del"),i=document.querySelector("#btn_div"),n=document.querySelector("#btn_one"),r=document.querySelector("#btn_two"),o=document.querySelector("#btn_three"),c=document.querySelector("#btn_mul"),a=document.querySelector("#btn_four"),u=document.querySelector("#btn_five"),p=document.querySelector("#btn_six"),d=document.querySelector("#btn_plus"),l=document.querySelector("#btn_seven"),h=document.querySelector("#btn_eight"),f=document.querySelector("#btn_nine"),x=document.querySelector("#btn_min"),E=document.querySelector("#btn_dec"),y=document.querySelector("#btn_zero"),v=document.querySelector("#btn_equ"),m=document.querySelector("#btn_sin"),b=document.querySelector("#btn_cos"),k=document.querySelector("#btn_tan"),S=document.querySelector("#btn_log"),g=document.querySelector("#btn_pi"),q=document.querySelector("#btn_sqrt"),L=document.querySelector("#btn_factorial"),_=document.querySelector("#btn_lparen"),I=document.querySelector("#btn_rparen"),N=document.querySelector("#btn_squared"),D=document.querySelector("#btn_power"),M=document.querySelector("#btn_cube");t.addEventListener("click",function(){e.updateExpression("AC")}),s.addEventListener("click",function(){e.updateExpression("DEL")}),i.addEventListener("click",function(){e.updateExpression("/")}),n.addEventListener("click",function(){e.updateExpression("1")}),r.addEventListener("click",function(){e.updateExpression("2")}),o.addEventListener("click",function(){e.updateExpression("3")}),c.addEventListener("click",function(){e.updateExpression("*")}),a.addEventListener("click",function(){e.updateExpression("4")}),u.addEventListener("click",function(){e.updateExpression("5")}),p.addEventListener("click",function(){e.updateExpression("6")}),d.addEventListener("click",function(){e.updateExpression("+")}),l.addEventListener("click",function(){e.updateExpression("7")}),h.addEventListener("click",function(){e.updateExpression("8")}),f.addEventListener("click",function(){e.updateExpression("9")}),E.addEventListener("click",function(){e.updateExpression(".")}),x.addEventListener("click",function(){e.updateExpression("-")}),y.addEventListener("click",function(){e.updateExpression("0")}),v.addEventListener("click",function(){e.solve()}),m.addEventListener("click",function(){e.updateExpression("sin(")}),b.addEventListener("click",function(){e.updateExpression("cos(")}),k.addEventListener("click",function(){e.updateExpression("tan(")}),g.addEventListener("click",function(){e.updateExpression("&pi;")}),q.addEventListener("click",function(){e.updateExpression("sqrt(")}),S.addEventListener("click",function(){e.updateExpression("log(")}),L.addEventListener("click",function(){e.updateExpression("!")}),_.addEventListener("click",function(){e.updateExpression("(")}),I.addEventListener("click",function(){e.updateExpression(")")}),N.addEventListener("click",function(){e.updateExpression("^2")}),M.addEventListener("click",function(){e.updateExpression("^3")}),D.addEventListener("click",function(){e.updateExpression("^")})},this.solve=function(){var e=new i.Calculator,t=e.toPostfix(this.expressionStr),s=e.calc(t);this.history.insert(s),this.expressionStr=s,this.displayingResult=!0,this.updateDisplay()},this.updateExpression=function(e){switch(e){case"AC":this.expressionStr="";break;case"DEL":null!=this.expressionStr&&(this.expressionStr=this.expressionStr.substring(0,this.expressionStr.length-1));break;case"+":case"*":case"/":case"-":case"^2":case"^3":case"^":case"!":this.expressionStr+=e;break;case"sqrt(":this.expressionStr=e+this.expressionStr;break;default:this.displayingResult&&(this.expressionStr=""),this.expressionStr+=e}this.displayingResult=!1,this.updateDisplay()},this.updateDisplay=function(){document.querySelector("#output").innerHTML=this.expressionStr},this.handleKeyPress=function(e){switch(e.code){case"Numpad0":case"Digit0":e.shiftKey?this.updateExpression(")"):this.updateExpression(0);break;case"Numpad1":case"Digit1":this.updateExpression(1);break;case"Numpad2":case"Digit2":this.updateExpression(2);break;case"Numpad3":case"Digit3":this.updateExpression(3);break;case"Numpad4":case"Digit4":this.updateExpression(4);break;case"Numpad5":case"Digit5":this.updateExpression(5);break;case"Numpad6":case"Digit6":this.updateExpression(6);break;case"Numpad7":case"Digit7":this.updateExpression(7);break;case"Numpad8":case"Digit8":this.updateExpression(8);break;case"Numpad9":case"Digit9":e.shiftKey?this.updateExpression("("):this.updateExpression(9);break;case"Escape":this.updateExpression("AC");break;case"Backspace":this.updateExpression("DEL");break;case"Slash":case"NumpadDivide":this.updateExpression("/");break;case"Minus":case"NumpadSubtract":this.updateExpression("-");break;case"NumpadAdd":this.updateExpression("+");break;case"NumpadMultiply":this.updateExpression("*");break;case"NumpadEnter":this.solve();break;case"Equal":e.shiftKey?this.updateExpression("+"):this.solve();break;case"ArrowUp":case"ArrowDown":var t=this.history.getHistory(),s="undefined";"ArrowUp"==e.code?null!=(s=t[(this.historyIndex+1)%t.length])&&"undefined"!=s?(this.historyIndex=(this.historyIndex+1)%t.length,this.expressionStr=s):this.historyIndex=0:null!=(s=t[(this.historyIndex-1)%t.length])&&"undefined"!=s?(this.historyIndex=(this.historyIndex-1)%t.length,this.expressionStr=s):this.historyIndex=t.length,this.updateDisplay()}}};var i=e("./engine.js"),n=e("./history.js")},{"./engine.js":2,"./history.js":3}]},{},[1]);
//# sourceMappingURL=calc.js.map
